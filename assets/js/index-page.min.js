function showDashboard(a){var b="<button type='button' id='back-button' class='btn btn-default'>Back</button>";$("#page").attr("id","hidden-page"),$("#header-wrapper").addClass("page"),$("#menu").hide(),$("#content").css({"background-color":"#333"}),windowwidth<tabletPixels?warned||(alert("If you are on a tablet or mobile phone, please turn it to landscape mode for better quality of dashboard. Please turn to landscape and hit the refresh button on the screen."),warned=!0):$("#content").css({"padding-left":"0","padding-right":"0"}),$("#cyfe-display").html("<iframe id='cyfe-iframe' src='"+a+"'></iframe>"),$("#cyfe-display").show(),$("#cyfe-display").before(b)}function evaluatePath(a){if("/dashboard/"==a){var b=$("[aria-expanded='true']");return b.collapse("hide"),$(".dashboard-sections-wrapper").hide(),$("#no-topics").show(),$("#sections-list").css("margin-top","0"),$(".nav-buttons-wrapper").removeClass("right-wall-topic-menu"),void $("li.nav-buttons-wrapper.active").removeClass("active")}var c=a.split("/");if("https:"!=c[0]){var d=c;if(5==c.length)var e=d.pop(),f=d.pop(),g=d.pop();else if(4==c.length)var f=d.pop(),g=d.pop();else if(3==c.length){var g=d.pop(),b=$("[aria-expanded='true']");b.collapse("hide")}else if(c.length<2||c.length>5)return void show404();if(""!==g&&".."!==g&&"login"!==g){var h=document.getElementById(g);if(null==h)return void show404();$("#no-topics").hide();var i=document.querySelector('[active-section-list="true"]');$(".nav-buttons-wrapper.active").removeClass("active"),null!=i&&(i.setAttribute("active-section-list",!1),$(i).hide());h.setAttribute("active-section-list",!0),$(h).show();var k=document.getElementsByClassName("nav-buttons btn topic-buttons "+g),l=k[0].closest(".nav-buttons-wrapper");$(l).addClass("active")}if(void 0!==f&&"verifylogin"!==f){var m=$("#"+f,$(h)),n=m.attr("id");if(void 0===n)return void show404();$("#"+n).collapse("show")}if(void 0!==e){var o=$("#"+e,$("#"+n)),p=o.attr("val");null==p?show404():showDashboard(p)}}}function convertNameToId(a){var b=a.toLowerCase(),c=b.replace(/(\s)+/g,"-");return c}function show404(){$("#content").css({"text-align":"center"}),$("#content").html("<h1>We were unable to locate that dashboard.</h1>");var a="<button type='button' class='btn btn-default' onclick='goToHome()'>Return Home</button>";$("#content").append(a)}function goToHome(){window.location="/dashboard/"}function hide_dashboard(){$("#back-button, #refresh-button").remove(),$("#cyfe-display").hide(),$("#menu").css("display","block"),$("#cyfe-iframe").attr("src",""),$("#content").css({"background-color":"#fff","padding-top":"none"}),windowwidth>=mobilePixels&&$("#content").css({"padding-left":"","padding-right":""}),$("#hidden-page").attr("id","page"),$("#header-wrapper").removeClass("page")}var windowwidth=$(window).width(),warned=!1,mobilePixels=768,tabletPixels=992;$(function(){evaluatePath(location.pathname),$("#login-success-alert").fadeTo(2e3,500).slideUp(500,function(){$("#login-success-alert").alert("close")})}),window.addEventListener("popstate",function(a){var b=a.state,c=b.split("/"),d="";for(".."==c[0]&&(d="/"),pathLen=c.length,i=0;i<pathLen;i++)".."!=c[i]&&""!=c[i]&&(d+=c[i]),i!=pathLen-1&&(d+="/");$("#back-button").length&&hide_dashboard(),evaluatePath(d)}),$(document).on("click",".btn.topic-buttons.nav-buttons",function(a){var b=$(a.target).closest(".nav-buttons-wrapper").offset().top,c=$(a.target).closest("#dashboard-topics").offset().top,d=convertNameToId(a.target.text);if($(".dashboard-sections-list").is(":hidden")&&$("#no-topics").hide(),$(a.target).closest(".nav-buttons-wrapper").hasClass("active")){$(a.target.offsetParent).removeClass("active"),$(".dashboard-sections-wrapper").hide(),$("#no-topics").show(),$("#sections-list").css("margin-top","0"),$(".nav-buttons-wrapper").removeClass("right-wall-topic-menu"),windowwidth<mobilePixels&&($("#sections-list").append($("#"+convertNameToId($(document).find(".active .topic-buttons").text()))),$("#sections-list").insertAfter($("#topics"))),history.pushState("/dashboard/",null,"/dashboard/");var e=window.location,f=e.protocol+"//"+e.host+"/"+e.pathname.split("/")[1];evaluatePath(f)}else{var g=document.querySelector('[active-section-list="true"]');$(".nav-buttons-wrapper.active").removeClass("active"),null!=g&&(g.setAttribute("active-section-list",!1),$(g).hide());var h=document.getElementById(d);if(h.setAttribute("active-section-list",!0),$(h).show(),1==h.children[0].children.length){var i=h.children[0].children[0].children[1].id;history.pushState("../../dashboard/"+d+"/"+i,null,"../../dashboard/"+d+"/"+i),evaluatePath(location.pathname)}else{var j=window.location.pathname.split("/");history.pushState("/"+j[1]+"/"+d,null,"/"+j[1]+"/"+d),evaluatePath(location.pathname)}windowwidth<mobilePixels?($("#sections-list").append($("#"+convertNameToId($(document).find(".active .topic-buttons").text()))),$("#"+d).insertAfter($(a.target))):$("#sections-list").css("margin-top",b-c)}}),$(document).on("click","li.dashboard-button a",function(a){a.preventDefault();var b=$(a.target).attr("val"),c=a.originalEvent.target.id,d=location.pathname;history.pushState(d+"/"+c,null,d+"/"+c),showDashboard(b)}),$(document).on("click","#back-button",function(a){history.go(-1)}),$(document).on("click","#refresh-button",function(){document.getElementById("cyfe-iframe").src=document.getElementById("cyfe-iframe").src}),$(document).on("click",".section-buttons",function(a){var b=a.target.parentElement.parentElement.parentElement.parentElement.id,c=a.target.parentElement.nextSibling.id;if("true"==a.target.attributes[5].value){var d="/dashboard/"+b+"/"+c;history.pushState(d,null,d)}else{var d="/dashboard/"+b;history.pushState(d,null,d)}});