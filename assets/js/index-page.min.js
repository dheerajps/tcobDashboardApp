function showDashboard(n){$("#page").attr("id","hidden-page");$("#header-wrapper").addClass("page");$("#menu").hide();$("#content").css({"background-color":"#333"});windowwidth<tabletPixels?warned||(alert("If you are on a tablet or mobile phone, please turn it to landscape mode for better quality of dashboard. Please turn to landscape and hit the refresh button on the screen."),warned=!0):$("#content").css({"padding-left":"0","padding-right":"0"});$("#cyfe-display").html("<iframe id='cyfe-iframe' src='"+n+"'><\/iframe>");$("#cyfe-display").show();$("#cyfe-display").before("<button type='button' id='back-button' class='btn btn-default'>Back<\/button>")}function evaluatePath(n){var t,i,e,r,f,u,o,p,l,a,v,s,y,h;if(n=="/"){f=$("[aria-expanded='true']");f.collapse("hide");$(".dashboard-sections-wrapper").hide();$("#no-topics").show();$("#sections-list").css("margin-top","0");$(".nav-buttons-wrapper").removeClass("right-wall-topic-menu");$("li.nav-buttons-wrapper.active").removeClass("active");return}if(t=n.split("/"),t[0]!="https:"){if(i=t,t.length==4)var c=i.pop(),e=i.pop(),r=i.pop();else if(t.length==3)e=i.pop(),r=i.pop();else if(t.length==2)r=i.pop(),f=$("[aria-expanded='true']"),f.collapse("hide");else if(t.length<1||t.length>4){show404();return}if(r!==""&&r!==".."&&r!=="login"){if(u=document.getElementById(r),u==null){show404();return}$("#no-topics").hide();o=document.querySelector('[active-section-list="true"]');$(".nav-buttons-wrapper.active").removeClass("active");o!=null&&(o.setAttribute("active-section-list",!1),$(o).hide());p=u;u.setAttribute("active-section-list",!0);$(u).show();l=document.getElementsByClassName("nav-buttons btn topic-buttons "+r);a=l[0].closest(".nav-buttons-wrapper");$(a).addClass("active")}if(e!==undefined&&e!=="verifylogin"){if(v=$("#"+e,$(u)),s=v.attr("id"),s===undefined){show404();return}$("#"+s).collapse("show")}c!==undefined&&(y=$("#"+c,$("#"+s)),h=y.attr("val"),h==null?show404():showDashboard(h))}}function convertNameToId(n){var t=n.toLowerCase();return t.replace(/(\s)+/g,"-")}function show404(){$("#content").css({"text-align":"center"});$("#content").html("<h1>We were unable to locate that dashboard.<\/h1>");$("#content").append("<button type='button' class='btn btn-default' onclick='goToHome()'>Return Home<\/button>")}function goToHome(){window.location="/"}function hide_dashboard(){$("#back-button, #refresh-button").remove();$("#cyfe-display").hide();$("#menu").css("display","block");$("#cyfe-iframe").attr("src","");$("#content").css({"background-color":"#fff","padding-top":"none"});windowwidth>=mobilePixels&&$("#content").css({"padding-left":"","padding-right":""});$("#hidden-page").attr("id","page");$("#header-wrapper").removeClass("page")}var windowwidth=$(window).width(),warned=!1,mobilePixels=768,tabletPixels=992;$(function(){evaluatePath(location.pathname);$("#login-success-alert").fadeTo(2e3,500).slideUp(500,function(){$("#login-success-alert").alert("close")})});window.addEventListener("popstate",function(n){var t=n.state;$("#back-button").length&&hide_dashboard();evaluatePath(t)});$(document).on("click",".btn.topic-buttons.nav-buttons",function(n){var o=$(n.target).closest(".nav-buttons-wrapper").offset().top,s=$(n.target).closest("#dashboard-topics").offset().top,t=convertNameToId(n.target.text),r,e,u,i,f;$(".dashboard-sections-list").is(":hidden")&&$("#no-topics").hide();$(n.target).closest(".nav-buttons-wrapper").hasClass("active")?($(n.target.offsetParent).removeClass("active"),$(".dashboard-sections-wrapper").hide(),$("#no-topics").show(),$("#sections-list").css("margin-top","0"),$(".nav-buttons-wrapper").removeClass("right-wall-topic-menu"),windowwidth<mobilePixels&&($("#sections-list").append($("#"+convertNameToId($(document).find(".active .topic-buttons").text()))),$("#sections-list").insertAfter($("#topics"))),history.pushState("/",null,"/"),r=window.location,e=r.protocol+"//"+r.host+"/"+r.pathname.split("/")[1],evaluatePath(e)):(u=document.querySelector('[active-section-list="true"]'),$(".nav-buttons-wrapper.active").removeClass("active"),u!=null&&(u.setAttribute("active-section-list",!1),$(u).hide()),i=document.getElementById(t),i.setAttribute("active-section-list",!0),$(i).show(),i.children[0].children.length==1?(f=i.children[0].children[0].children[1].id,history.pushState("../"+t+"/"+f,null,"../"+t+"/"+f),evaluatePath(location.pathname)):(history.pushState("../"+t,null,"../"+t),evaluatePath(location.pathname)),windowwidth<mobilePixels?($("#sections-list").append($("#"+convertNameToId($(document).find(".active .topic-buttons").text()))),$("#"+t).insertAfter($(n.target))):$("#sections-list").css("margin-top",o-s))});$(document).on("click","li.dashboard-button a",function(n){n.preventDefault();var r=$(n.target).attr("val"),t=n.originalEvent.srcElement.id,i=location.pathname;history.pushState(i+"/"+t,null,i+"/"+t);showDashboard(r)});$(document).on("click","#back-button",function(){history.go(-1)});$(document).on("click","#refresh-button",function(){document.getElementById("cyfe-iframe").src=document.getElementById("cyfe-iframe").src});$(document).on("click",".section-buttons",function(n){var i=n.target.parentElement.parentElement.parentElement.parentElement.id,r=n.target.parentElement.nextSibling.id,t;n.target.attributes[5].value=="true"?(t="../"+i+"/"+r,history.pushState(t,null,t)):(t="../"+i,history.pushState(t,null,t))});